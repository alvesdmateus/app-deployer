# app-deployer configuration file
# Environment variables will override these values

server:
  port: "3000"
  read_timeout: 10s
  write_timeout: 10s
  log_level: info

database:
  host: 127.0.0.1
  port: 5434
  user: deployer
  password: deployer_dev_password
  dbname: app_deployer
  sslmode: disable
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 5m

redis:
  url: localhost:6379
  password: ""
  db: 0

platform:
  default_cloud: gcp
  default_region: us-central1

registry:
  type: artifact-registry  # artifact-registry, harbor, ecr, acr
  project: "daring-precinct-478521-a3"
  location: us-central1
  url: ""

provisioner:
  gcp_project: "daring-precinct-478521-a3"
  gcp_region: us-central1
  pulumi_backend: "gs://daring-precinct-478521-a3-pulumi-state/app-deployer"
  default_node_type: e2-small
  default_nodes: 2

deployer:
  default_replicas: 2
  default_port: 8080
  helm_timeout: 5m
  pod_timeout: 5m

worker:
  concurrency: 3  # Number of concurrent workers processing jobs
  poll_interval: 5s

limits:
  max_deployments_per_user: 10
  max_cpu_per_deployment: 4000m
  max_memory_per_deployment: 8Gi
  max_build_time: 30m
